# ☃️ Figure system

Технология, которая отвечает за расстановку фигур на карте.

### State



### Similar to

1. Valheim - генерация карты.

2. Minecraft - генерация карты.

### Features

Фигурки расставляются на тайлах и сохраняются в памяти, также они могут быть разморожены игроком, тем самым удаляя фигурку навсегда.

Данные фигур в отдельных списках.

Редактирующий префаб, содержит внутри себя экземпляр конфигурации.

Податлив к управлению в бех компоненте, который знает данные технологии и позволяет за ними наблюдать:

- Видно все размеры коллекций по их названиям.

### Structure

Data:

- `savedFigure` - фигуры, которые уже сгенерированы.

- `activeFigure` - фигуры, с которыми сейчас игрок может контактировать

- `addedActiveFigure` - недавно добавленные фигуры.

- `removedActiveFigure` - недавно удалённые фигуры.

- `figureCollision` - данные колизии относительно одной сохранённой фигуры.

- `_addedView` - недавно добавленные визуализации фигуры.

- `addedTile` - тайлы, которые недавно были созданы.

- `removedTile` - тайлы, которые были недавно удалены.

Data structures:

- `Figure` - сущность фигуры, со своей позицией на сцене и принадлежащим тайлом.

- `FigureCollision` - компонент фигуры имеющий данные столкновения.

- `FigureVisulization` - компонент фигру, отвечающий за визуальное представление.

- `Tile` - сущность плитки в виде индексной позиции.

Systems:

- `FigureCreationSystem` - отвечает за создание фигур, выполняется при получении нового тайла.

- `ActiveFigureService` - отвечает за наполнение списка активных в текущий момент фигур, делает это за счёт списка новых тайлов и удалённых тайлов и сверяет так список всех фигур.

- `Service<Figure>` - наполняет список добавленных и удалённых фигур.

- `FigureVisulazationSystem` - выполняет визуализациюя фигур.

- `FigureCollisionService` - наполняет список столкновения фигур.

- `FigureCollisionSystem` - выполняет действие при столкновении фигуры с объектом.

`FigureEditorConfiguration` - конфигурация инструмента редактирования, которая содержит внутри себя худ сериализацию, над которой работает система.

`FigureBehaviour` - принимает все необходимые данные для технологии, чтобы запустить это.

`MapManager` редактирует сверху, а ниже FigureManager.